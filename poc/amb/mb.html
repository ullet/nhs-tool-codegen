<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>[A Myth Buster]</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="jquery.querystring.js"></script>
    <script type="text/javascript" src="mbdef.js"></script>
    <script type="text/javascript">
      var myth_buster = $.QueryString['mb'];
      var content = $('<div></div>')
      if (myth_buster) {
        content.load(myth_buster.toLowerCase() + '_myth_buster.html');
      }

      $(document).ready(initialize);

      function initialize() {
        setTitle();
        intro();
      }

      function setTitle() {
        document.title = content.find('.meta .title').text();
      }

      function intro() {
        setContent(content.find('.intro'));
        setStartNav();
        setMoreInfoNav(-1);
      }

      function setContent(element) {
        $('#myth-buster').empty().append(element.clone());
      }

      function setStartNav() {
        $('.start').click(start);
      }

      function start() {
        question(0);
      }

      function question(index) {
        setContent(questions().eq(index));
        setNav(index);
      }

      function questions() {
        return content.find('.questions .question');
      }

      function setNav(questionIndex) {
        if (questionIndex > 0)
          $('.previous').click(function() { question(questionIndex-1) });
        if (questionIndex < lastQuestionIndex())
          $('.next').click(function() { question(questionIndex+1) });
        // TODO; True and False clicks
        setMoreInfoNav(questionIndex);
      }

      function setMoreInfoNav(questionIndex) {
        $('.more-info').click(function() { moreInfo(questionIndex) });
      }

      function moreInfo(questionIndex) {
        setContent(content.find('div.more-info'));
        if (questionIndex < 0)
          $('.back').click(intro);
        else
          $('.back').click(function() { question(questionIndex) });
      }

      function lastQuestionIndex() {
        return questions().size() - 1;
      }
    </script>
    <link rel="stylesheet" type="text/css" href="mb.css" />
  </head>
  <body>
    <div id="myth-buster"></div>
  </body>
</html>
